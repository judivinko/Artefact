/* =========================================================
   ARTEFACT — FULL CSS (App first, Admin scoped last)
   (verzija usklađena: crna tema, centriran layout, obojene sekcije)
   ========================================================= */

/* ------------------------------
   Root vars
------------------------------ */
:root{
  --line:#233047;
  --text:#e5e7eb;

  /* SLIKE / SLOTOVI */
  --cell: 1.5cm;          /* univerzalni slot za ikonice/slike */
  --landing: 4cm;         /* landing HOW slike */

  /* Layout helpers */
  --row-pad-v: 8px;       /* vert. padding itemrow-a */
  --rowH: calc(var(--cell) + (var(--row-pad-v) * 2) + 2px); /* slika + padding + border */

  /* Pozadina – CRNA TEMA */
  --bg0:#000000;
  --bg1:#070a10;
  --bg2:#0b0f19;
  --glass:rgba(11,18,32,.66);

  /* Sekcijske boje */
  --shop:#e05735;   --shop-border:#8a2c1e;   --shop-fill:rgba(224,87,53,.08);
  --craft:#d9b14d;  --craft-border:#8d6f20;  --craft-fill:rgba(217,177,77,.08);
  --market:#2fbfa5; --market-border:#1d7a69; --market-fill:rgba(47,191,165,.08);
  --inv:#845ef7;    --inv-border:#4f34b9;    --inv-fill:rgba(132,94,247,.08);
  --bonus:#25c06f;  --bonus-border:#197a47;  --bonus-fill:rgba(37,192,111,.08);

  /* Širina sadržaja */
  --page-max:1080px;
  --page-pad:16px;
}

/* ------------------------------
   Global background (crna + odsjaj)
------------------------------ */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  color:var(--text);
  background:
    radial-gradient(1200px 700px at 15% 20%, rgba(255,255,255,.05), transparent 60%),
    radial-gradient(1200px 700px at 85% 70%, rgba(255,255,255,.04), transparent 70%),
    linear-gradient(160deg, var(--bg0) 0%, var(--bg1) 45%, var(--bg2) 100%);
}
body::before{
  content:"";
  position:fixed; inset:0; pointer-events:none; z-index:-1; opacity:.35;
  background:
    radial-gradient(ellipse at 30% 30%, rgba(255,255,255,0.04), transparent 40%),
    radial-gradient(ellipse at 70% 70%, rgba(255,255,255,0.035), transparent 45%);
  -webkit-mask-image: radial-gradient(circle at 50% 50%, black 55%, transparent 75%);
          mask-image: radial-gradient(circle at 50% 50%, black 55%, transparent 75%);
}

/* ------------------------------
   Utilities / text / layout
------------------------------ */
.hidden{ display:none !important }
.muted{ opacity:.8 }
.label{ font-weight:600 }
.brand{ font-weight:700 }
.container{ max-width:var(--page-max); margin:0 auto; padding:12px var(--page-pad) }
.row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.right{ margin-left:auto }

/* “unutra” centriranje za glavne blokove */
#app, .tabbar, #shop-info, .header{
  max-width:var(--page-max);
  margin:0 auto;
  padding-left:var(--page-pad);
  padding-right:var(--page-pad);
}

/* ------------------------------
   Header
------------------------------ */
.header{
  display:flex; align-items:center; justify-content:space-between;
  padding-top:12px; padding-bottom:12px;
  border-bottom:1px solid rgba(255,255,255,.06);
  position:sticky; top:0; z-index:20;
  background:rgba(0,0,0,.55); backdrop-filter: blur(8px);
}
.header.no-border{ border-bottom:0 !important }

/* ------------------------------
   Core components
------------------------------ */
.badge{
  border:1px solid var(--line); padding:4px 8px;
  border-radius:999px; background:#071021; font-size:12px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.03);
}
.btn{
  cursor:pointer; border:1px solid rgba(255,255,255,0.08);
  background:#0f1c30; padding:8px 12px; border-radius:10px; color:var(--text);
  transition: transform .06s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.03);
}
.btn:hover{ transform:translateY(-1px); border-color:#2a3d63; background:#12233e; }
.btn:active{ transform:translateY(0); }
.btn.muted{ opacity:.9 }
.btn.secondary{ background:#0b2236 }
.btn.secondary:hover{ background:#0e2a44 }
.btn.danger{ background:#3a0d14; border-color:#5a1a22 }
.btn.danger:hover{ background:#4a131b; border-color:#7a2933 }

.input{
  background:#0b1220; border:1px solid var(--line); border-radius:8px;
  padding:8px 10px; color:#e5e7eb;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
.input:focus{ outline:none; border-color:#3a5b8e; box-shadow:0 0 0 3px rgba(70,130,180,.15) }

/* Kartice: sužene, s većim razmacima od ruba stranice */
.card{
  background:var(--glass);
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  padding:14px;
  margin-top:14px;
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 28px rgba(0,0,0,.30), inset 0 0 0 1px rgba(255,255,255,.02);
}
.toast{
  position:fixed; bottom:16px; right:16px; background:#0d1b2a; border:1px solid var(--line);
  border-radius:8px; padding:10px 12px; box-shadow:0 10px 24px rgba(0,0,0,.35); z-index:50;
}

/* Lists & rows */
.itemrow{
  display:flex; align-items:center; justify-content:space-between;
  padding: var(--row-pad-v) 10px; border-bottom:1px solid #13223a;
  min-height: var(--rowH);
}
.itemrow:last-child{ border-bottom:0 }
.list{
  max-height:360px; overflow:auto; border:1px solid rgba(255,255,255,.06); border-radius:10px;
  background:rgba(9,19,38,.5);
  backdrop-filter: blur(6px);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}

/* Tiles */
.tile{ display:flex; gap:6px; align-items:center; border:1px solid rgba(255,255,255,.06); border-radius:10px; padding:6px; background:#0c1728 }
.tile.ok{ border-color:#165c32; background:#0e3a2f }
.tile.miss{ opacity:.88 }

/* Grid presets */
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
.grid-4{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:10px }
.grid-5{ display:grid; grid-template-columns:repeat(5,minmax(0,1fr)); gap:6px }
@media (max-width:900px){
  .grid{ grid-template-columns:1fr }
  .grid-4{ grid-template-columns:repeat(2,1fr) }
  .grid-5{ grid-template-columns:repeat(3,1fr) }
}

/* Images / slots */
img.icon{ width:28px; height:28px; object-fit:contain; border-radius:6px; display:block }
.img-cell{ width:var(--cell); height:var(--cell); object-fit:contain; border-radius:6px; display:block; }
.img-landing{ width:var(--landing); height:var(--landing); object-fit:contain; border-radius:10px; display:block; margin-top:8px; }
.img-slot{ margin-top:10px; width:100%; min-height:96px; border:1px dashed #233047; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:12px; opacity:.85 }
.img-slot:hover{ opacity:1 }

/* ------------------------------
   Tabs (u boji sekcije kad je aktivan)
------------------------------ */
.tabbar{ margin:10px auto 12px; display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.chip{
  padding:10px 14px; border:1px solid #1c2a44; border-radius:12px;
  background:#0d1b2acc; backdrop-filter: blur(6px);
  cursor:pointer;
  transition:transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 2px 10px rgba(0,0,0,.25);
}
.chip:hover{ transform:translateY(-1px); border-color:#2a3d63; }
.chip.active{
  color:#fff;
  background:linear-gradient(180deg,#1b2a46,#0f2340);
  border-color:#2e4b7a;
  box-shadow: inset 0 0 0 1px rgba(120,170,255,.18), 0 6px 16px rgba(20,40,80,.45);
}

/* Aktivni tab dobiva boju ruba prema sekciji (vizualna poveznica) */
.chip[data-tab="shop"].active{ box-shadow:0 0 0 2px rgba(224,87,53,.35) inset, 0 6px 16px rgba(224,87,53,.25); }
.chip[data-tab="craft"].active{ box-shadow:0 0 0 2px rgba(217,177,77,.35) inset, 0 6px 16px rgba(217,177,77,.25); }
.chip[data-tab="market"].active{ box-shadow:0 0 0 2px rgba(47,191,165,.35) inset, 0 6px 16px rgba(47,191,165,.25); }
.chip[data-tab="inv"].active{ box-shadow:0 0 0 2px rgba(132,94,247,.35) inset, 0 6px 16px rgba(132,94,247,.25); }
.chip[data-tab="bonus"].active{ box-shadow:0 0 0 2px rgba(37,192,111,.35) inset, 0 6px 16px rgba(37,192,111,.25); }

/* ------------------------------
   SEKCIJE — rub/fill i dugmad po boji
------------------------------ */
.section-colored{ /* helper klasa ako ti zatreba ručno */
  position:relative;
  overflow:hidden;
}

/* SHOP */
#tab-shop .card{ border-color:var(--shop-border); background:linear-gradient(180deg, var(--shop-fill), transparent 45%) }
#tab-shop .btn{ background:rgba(224,87,53,.12); border-color:rgba(224,87,53,.35) }
#tab-shop .btn:hover{ background:rgba(224,87,53,.18); border-color:rgba(224,87,53,.55); box-shadow:0 0 0 3px rgba(224,87,53,.16) }

/* CRAFT */
#tab-craft .card{ border-color:var(--craft-border); background:linear-gradient(180deg, var(--craft-fill), transparent 45%) }
#tab-craft .btn{ background:rgba(217,177,77,.12); border-color:rgba(217,177,77,.35) }
#tab-craft .btn:hover{ background:rgba(217,177,77,.18); border-color:rgba(217,177,77,.55); box-shadow:0 0 0 3px rgba(217,177,77,.16) }

/* MARKET */
#tab-market .card{ border-color:var(--market-border); background:linear-gradient(180deg, var(--market-fill), transparent 45%) }
#tab-market .btn{ background:rgba(47,191,165,.12); border-color:rgba(47,191,165,.35) }
#tab-market .btn:hover{ background:rgba(47,191,165,.18); border-color:rgba(47,191,165,.55); box-shadow:0 0 0 3px rgba(47,191,165,.16) }

/* INVENTORY */
#tab-inv .card{ border-color:var(--inv-border); background:linear-gradient(180deg, var(--inv-fill), transparent 45%) }
#tab-inv .btn{ background:rgba(132,94,247,.12); border-color:rgba(132,94,247,.35) }
#tab-inv .btn:hover{ background:rgba(132,94,247,.18); border-color:rgba(132,94,247,.55); box-shadow:0 0 0 3px rgba(132,94,247,.16) }

/* BONUS */
#tab-bonus .card{ border-color:var(--bonus-border); background:linear-gradient(180deg, var(--bonus-fill), transparent 45%) }
#tab-bonus .btn{ background:rgba(37,192,111,.12); border-color:rgba(37,192,111,.35) }
#tab-bonus .btn:hover{ background:rgba(37,192,111,.18); border-color:rgba(37,192,111,.55); box-shadow:0 0 0 3px rgba(37,192,111,.16) }

/* ------------------------------
   SHOP specifično
------------------------------ */
#tab-shop .buy-block{ width:10cm; max-width:100% }
#shop-balance.badge{ font-weight:700 }

/* “Buys to next recipe” — tipografija/razmak kad ga JS spusti ispod naslova */
#buysToNext{
  display:block;
  margin:6px 0 10px;
  text-align:left;
  opacity:.9;
}

/* ------------------------------
   CRAFTING — fiksne liste i bez preljeva
------------------------------ */
#tab-craft{ display:flex; flex-direction:column; gap:12px; }
#tab-craft .grid{ align-items:stretch; }

/* Obje liste (lijevo i desno) točno 8 redaka visine (bez da ulaze u druge sekcije) */
#recipes.list,
#rec-details.list{
  min-height: calc(var(--rowH) * 8 + 2px);
  max-height: calc(var(--rowH) * 8 + 2px);
  overflow:auto;
}

/* “Craft” red ostaje vidljiv pri dnu desne liste */
#rec-details .itemrow:last-child{
  position:sticky; bottom:0;
  background:rgba(9,19,38,.92); backdrop-filter: blur(6px);
}

/* ------------------------------
   INVENTORY
------------------------------ */
#tab-inv .list{ max-height: 520px; overflow:auto }

/* ------------------------------
   MARKET
------------------------------ */
#tab-market .list{ max-height: 520px; overflow:auto }

/* ------------------------------
   BONUS
------------------------------ */
#tab-bonus .grid > .card{ min-height:auto }
#bonus-grid .list{ max-height: 360px }

/* ------------------------------
   Header balance pulse (vizualno)
------------------------------ */
@keyframes pulseTw{
  0%{ box-shadow:0 0 0 0 rgba(120,170,255,.35) }
  70%{ box-shadow:0 0 0 8px rgba(120,170,255,0) }
  100%{ box-shadow:0 0 0 0 rgba(120,170,255,0) }
}
#balance.pulse{ animation:pulseTw 1.2s ease-out 1 }

/* ------------------------------
   PayPal panel / button
------------------------------ */
#btn-open-paypal.hidden{ display:none }
#paypal-panel.hidden{ display:none }
#paypal-button-container{ transform:scale(.95); transform-origin:left center }
@media (max-width:520px){
  #paypal-button-container{ transform:scale(.9) }
}

/* ==================================================================
   ADMIN (SCOPED) – vrijedi samo na admin stranici
   Stavi <body class="admin"> u admin.html
   ================================================================== */
body.admin{
  background:#0f172a;
  color:#e2e8f0;
  font-size:14px;
  line-height:1.45;
}
body.admin .container{ max-width:1100px; margin:0 auto; padding:12px var(--page-pad); }
body.admin .header{ background:#0f172acc; border-bottom:1px solid #1f2937; }
body.admin .card{ background:#111827cc; border:1px solid #1f2937; border-radius:12px; padding:12px; margin-top:12px; }
body.admin .label{ color:#94a3b8; text-transform:uppercase; letter-spacing:.5px; }
body.admin .muted{ color:#94a3b8; }

/* layout helpers */
body.admin .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
@media (max-width:900px){ body.admin .grid2{ grid-template-columns:1fr } }
body.admin .rowx{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
body.admin .mono{ font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace }

/* inputi */
body.admin input[type="text"],
body.admin input[type="password"],
body.admin input[type="number"],
body.admin .search{
  width:100%; padding:8px 10px; border-radius:8px;
  border:1px solid #233047; background:#0b1220; color:#e2e8f0;
}
body.admin input:disabled{ opacity:.7; cursor:not-allowed }

/* tagovi */
body.admin .tag{ font-size:11px; padding:2px 6px; border-radius:6px; background:#1f2937 }
body.admin .tag.red{ background:#3b1113; color:#fecaca }
body.admin .tag.green{ background:#0f2e1b; color:#bbf7d0 }

/* liste – stabilna visina + skrol */
body.admin .list{
  background:#0b1220cc; border:1px solid #1f2937; border-radius:10px;
  padding:12px; white-space:pre-wrap;
  max-height: 65vh; overflow:auto;
}

/* red korisnika */
body.admin .user-row{
  display:flex; gap:8px; align-items:center; justify-content:space-between;
  padding:6px 8px; border-radius:8px; transition: background .15s ease;
}
body.admin .user-row:hover{ background:#0f172a }

/* tablica kodova */
body.admin .codes-table{ width:100%; border-collapse:collapse }
body.admin .codes-table th, body.admin .codes-table td{
  padding:8px 10px; border-bottom:1px solid #233047; text-align:left
}
body.admin .codes-table th{
  color:#94a3b8; font-weight:600; text-transform:uppercase; font-size:12px; letter-spacing:.4px
}
body.admin .codes-table input{
  background:#0b1220; border:1px solid #233047; border-radius:8px; padding:8px 10px; color:#e2e8f0; width:100%
}
body.admin .codes-row-actions{ display:flex; gap:8px; align-items:center }

/* slike u adminu — iste dimenzije slotova */
body.admin img.icon{ width:28px; height:28px; object-fit:contain; border-radius:6px; display:block }
body.admin .img-cell{ width:var(--cell); height:var(--cell); object-fit:contain; border-radius:6px; display:block }
