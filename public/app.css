/* ========================================================= 
   ARTEFACT — COMPLETE CSS (Game + Admin)
   ========================================================= */

/* ------------------------------
   Reset / base
------------------------------ */
*,
*::before,
*::after{ box-sizing:border-box }
html,body{ height:100% }
body{ margin:0 }

/* ------------------------------
   Root vars
------------------------------ */
:root{
  --line:#233047;
  --text:#e5e7eb;
  --cell:1.5cm;     /* univerzalni slot za ikonice */
  --landing:4cm;    /* veće slike (landing/HOW) */
  --vh-offset:160px;/* header+tabbar offset */
  --inv-offset:160px;
}

/* ------------------------------
   Global background (nije jednobojna)
------------------------------ */
body{
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.16), transparent 60%),
    radial-gradient(900px 500px at 80% 20%, rgba(34,211,238,0.18), transparent 65%),
    radial-gradient(900px 600px at 70% 85%, rgba(234,88,12,0.12), transparent 60%),
    linear-gradient(160deg, #0b1220 0%, #0e1b2e 45%, #0a0f1f 100%);
}
body::before{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:-1; opacity:.6;
  background:
    radial-gradient(ellipse at 30% 30%, rgba(255,255,255,0.04), transparent 40%),
    radial-gradient(ellipse at 70% 70%, rgba(255,255,255,0.035), transparent 45%);
  -webkit-mask-image: radial-gradient(circle at 50% 50%, black 55%, transparent 75%);
          mask-image: radial-gradient(circle at 50% 50%, black 55%, transparent 75%);
}

/* ------------------------------
   Utilities / text / layout
------------------------------ */
.hidden{display:none}
.muted{opacity:.8}
.label{font-weight:600}
.brand{font-weight:700}
.container{max-width:980px;margin:0 auto;padding:12px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.right{margin-left:auto}

/* Prevent horizontal bleed anywhere */
main, section, .card, #app, #tab-shop, #tab-craft, #tab-market, #tab-inv, #tab-bonus{
  max-width:100%;
  overflow-x:hidden;
}

/* ------------------------------
   Header
------------------------------ */
.header{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px; border-bottom:1px solid var(--line);
  position:sticky; top:0; z-index:20;
  background:rgba(11,18,32,.6); backdrop-filter: blur(8px);
}
.header.no-border{ border-bottom:0!important }

/* ------------------------------
   Core components
------------------------------ */
.badge{
  border:1px solid var(--line); padding:4px 8px;
  border-radius:999px; background:#071021; font-size:12px
}
.btn{
  cursor:pointer; border:1px solid rgba(255,255,255,0.08);
  background:#0f1b2c; padding:8px 12px; border-radius:10px; color:var(--text);
  transition:transform .06s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
}
.btn:hover{ transform:translateY(-1px) }
.btn.muted{opacity:.9}
.btn.secondary{background:#0d2a3a}
.btn.danger{background:#3a0d14}
.input{
  background:#0b1220;border:1px solid var(--line);border-radius:8px;
  padding:8px 10px;color:#e5e7eb
}
.card{
  background:#0b1220cc;border:1px solid var(--line);border-radius:12px;
  padding:12px;margin-top:12px; backdrop-filter: blur(4px)
}
.toast{
  position:fixed;bottom:16px;right:16px;background:#0d1b2a;
  border:1px solid var(--line);border-radius:8px;padding:10px 12px; z-index:50
}

/* Lists & rows */
.itemrow{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 10px;border-bottom:1px solid #13223a
}
.itemrow:last-child{border-bottom:0}
.list{
  max-height:360px;overflow:auto;border:1px solid var(--line);border-radius:10px;
  background:rgba(9,19,38,.5);
}

/* Tiles */
.tile{display:flex;gap:6px;align-items:center;border:1px solid var(--line);border-radius:10px;padding:6px}
.tile.ok{border-color:#165c32;background:#0e3a2f}
.tile.miss{opacity:.85}

/* Grid presets */
.grid{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:12px}
.grid-4{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
.grid-5{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:6px}

/* Images / slots */
img.icon{width:28px;height:28px;object-fit:contain;border-radius:6px;display:block}
.img-cell{width: var(--cell); height: var(--cell); object-fit: contain; border-radius: 6px; display: block;}
.img-landing{width: var(--landing); height: var(--landing); object-fit: contain; border-radius: 10px; display: block; margin-top: 8px;}
.img-slot{ margin-top:10px; width:100%; min-height:96px; border:1px dashed #233047; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:12px; opacity:.85 }
.img-slot:hover{ opacity:1 }

/* ------------------------------
   Tabs
------------------------------ */
.tabbar{
  position: sticky; top: 56px; z-index: 9;
  display: flex; gap: 8px; align-items: center;
  padding: 8px 10px; margin: 8px 0 10px;
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(11,18,32,0.5);
  backdrop-filter: blur(8px);
  border-radius: 12px;
  overflow-x: auto; overflow-y: hidden;
}
.tabbar::before{
  content:""; position:absolute; inset:0; border-radius:12px; pointer-events:none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.04);
}
.chip{
  position: relative; padding: 8px 14px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.08);
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  color: #e5e7eb; font-weight: 600; letter-spacing: .2px;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  user-select: none; white-space: nowrap; cursor:pointer;
}
.chip:hover{
  transform: translateY(-1px);
  border-color: rgba(163, 230, 255, .35);
  box-shadow: 0 2px 10px rgba(34,211,238,.12), inset 0 0 0 1px rgba(255,255,255,0.04);
}
.chip.active{
  background:
    radial-gradient(120% 160% at 50% 0%, rgba(34,211,238,.20), rgba(124,58,237,.12) 45%, transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.05));
  border-color: rgba(34,211,238,.45);
  box-shadow: 0 4px 18px rgba(34,211,238,.18), inset 0 0 0 1px rgba(255,255,255,0.05);
}
.chip.active::after{
  content:""; position:absolute; left:18px; right:18px; bottom:-6px; height:3px;
  border-radius:3px;
  background: linear-gradient(90deg, rgba(34,211,238,.9), rgba(124,58,237,.9));
  filter: drop-shadow(0 0 6px rgba(34,211,238,.35));
}
@media (min-width: 900px){ .chip{ font-size:15px } }

/* ------------------------------
   Tab containers (contain so they don't bleed)
------------------------------ */
#tab-shop, #tab-craft, #tab-market, #tab-inv, #tab-bonus{
  min-height: calc(100vh - var(--vh-offset));
  display:flex; flex-direction:column;
  overflow-y:auto; overflow-x:hidden;
}

/* ------------------------------
   SHOP
------------------------------ */
#tab-shop .buy-block{ width:10cm; max-width:100% }
@media (max-width:600px){ #tab-shop .buy-block{ width:100% } }

/* ------------------------------
   CRAFTING (fiksnih 8 redaka u listi)
------------------------------ */
#tab-craft .grid{ flex:1; min-height:0 }
#tab-craft .grid > .card{ display:flex; flex-direction:column; min-height:0; max-width:100% }

/* Lista “Recipes you own” = točno 8 redaka; ostatak skrol */
#recipes.list{
  --craft-row-h: 66px;                 /* podešavanje visine retka */
  height: calc(var(--craft-row-h) * 8 + 4px);
  max-height: calc(var(--craft-row-h) * 8 + 4px);
  overflow-y:auto; overflow-x:hidden;
}
#recipes.list .itemrow{ min-height: var(--craft-row-h) }

/* Details panel skrolan unutar kartice, ne izlazi van */
#rec-details.list{
  flex:1; min-height:0; max-height:none; overflow:auto;
}

/* ------------------------------
   MARKET
------------------------------ */
#tab-market .grid{ flex:1; min-height:0 }
#tab-market .grid > .card{ display:flex; flex-direction:column; min-height:0 }
#inv-list.list, #market.list, #mine.list{ flex:1; min-height:0; max-height:none }

/* ------------------------------
   INVENTORY
------------------------------ */
.inv-grid{ display:grid; grid-template-columns:minmax(0,1fr) minmax(0,1fr); gap:12px; margin-top:8px;
  height: calc(100vh - var(--inv-offset)); }
.inv-pane{ display:flex; flex-direction:column; min-height:0 }
.inv-pane .list{ flex:1; min-height:0; max-height:none }
.bigcount{ font-size:16px; font-weight:700; letter-spacing:.2px }
.itemrow .muted, .itemrow .qty{ font-size:16px; font-weight:600 }

/* ------------------------------
   BONUS
------------------------------ */
#tab-bonus .grid{ flex:1; min-height:0 }
#tab-bonus .grid > .card{ display:flex; flex-direction:column; min-height:0 }
#bonus-t2.list, #bonus-t3.list, #bonus-t4.list, #bonus-t5.list{
  flex:1; min-height:0; max-height:none; overflow:auto;
}

/* ------------------------------
   Responsive
------------------------------ */
@media (max-width:900px){
  .grid{grid-template-columns:1fr}
  .grid-4{grid-template-columns:repeat(2,1fr)}
  .grid-5{grid-template-columns:repeat(3,1fr)}
  .inv-grid{ grid-template-columns:1fr }
}

/* =========================================================
   ADMIN PANEL (safe-scoped)
   ========================================================= */
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:900px){ .grid2{grid-template-columns:1fr} }
.rowx{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
.tag{font-size:11px;padding:2px 6px;border-radius:6px;background:#1f2937}
.tag.red{background:#3b1113;color:#fecaca}
.tag.green{background:#0f2e1b;color:#bbf7d0}
.search{width:100%;padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:#0b1220;color:var(--text)}
#users.list,#inv.list{background:#0b1220cc;border:1px solid var(--line);border-radius:10px;padding:12px;white-space:pre-wrap}
.user-row{display:flex;gap:8px;align-items:center;justify-content:space-between;padding:6px 8px;border-radius:8px;transition: background .15s ease}
.user-row:hover{background:#0f172a}
#who{font-size:13px;opacity:.9}
#admin-key,#gold-amount,#bonus-gold,[id^="bonus-code-"],[id^="bonus-percent-"],[id^="bonus-used-"]{background:#0b1220;border:1px solid var(--line);border-radius:8px;padding:8px 10px;color:var(--text)}
#admin-key:disabled,#gold-amount:disabled,#bonus-gold:disabled,[id^="bonus-code-"]:disabled,[id^="bonus-percent-"]:disabled{opacity:.7;cursor:not-allowed}
.codes-table{width:100%;border-collapse:collapse}
.codes-table th,.codes-table td{padding:8px 10px;border-bottom:1px solid var(--line);text-align:left}
.codes-table th{color:#94a3b8;font-weight:600;text-transform:uppercase;font-size:12px;letter-spacing:.4px}
.codes-table input{background:#0b1220;border:1px solid var(--line);border-radius:8px;padding:8px 10px;color:#e2e8f0;width:100%}
.codes-row-actions{display:flex;gap:8px;align-items:center}
